using System;
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

using Random = UnityEngine.Random;

public class MalwareManager : MonoBehaviour
{
    public static MalwareObject[] malwareDict;

    public void Start()
    {
        SetMalwareDictionary();
    }

    private void SetMalwareDictionary()
    {
        string jsonString = SaveSystem.LoadDictionary("MalwareTemplate.json");
        if (jsonString == null)
        {
            Application.Quit();
        }
        malwareDict = JsonHelper.FromJson<MalwareObject>(jsonString);
    }

    public static (int, MalwareObject) GetRandomMalware()
    {
        int i = Random.Range(0, malwareDict.Length);
        return (i, malwareDict[i]);
    }

    public static MalwareType GetMalwareTypeFromIndex(int i)
    {
        return malwareDict[i].detail;
    }

    public static string GetMalwareNameFromIndex(int i)
    {
        return malwareDict[i].name;
    }
}

[Serializable]
public class MalwareObject
{
    public string name;

    public MalwareType detail;
}
